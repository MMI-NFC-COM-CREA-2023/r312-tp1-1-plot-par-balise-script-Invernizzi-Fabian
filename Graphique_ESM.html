<!DOCTYPE html>
<div id="myplot"></div>
<script type="module">

import * as Plot from "https://cdn.jsdelivr.net/npm/@observablehq/plot@0.6/+esm";

async function fetchData() {
    const response = await fetch('data.json');
    const data = await response.json();
    return data;
}

fetchData().then(data => {
    const plot = Plot.plot({
        marginLeft: 110,
        title: "Top 10 des nationalités vainqueurs de Grand Chelem",
        x: { label: "Nb de victoires" },
        y: { label: "Nationalités" },
        marks: [
            Plot.barX(
                data,
                Plot.groupY({ x: "count" }, { y: "WINNER_NATIONALITY", tip: true, sort: { y: "x", reverse: true, limit: 10 } })
            ),
            Plot.ruleX([0])
        ]
    });
    const div = document.querySelector("#myplot");
    div.append(plot);
});

</script>